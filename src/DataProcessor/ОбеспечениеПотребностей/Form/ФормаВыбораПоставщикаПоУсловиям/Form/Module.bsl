////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АвтоТест") Тогда
	
		Возврат;
	
	КонецЕсли;

	СписокВыбораПоставщика.Параметры.УстановитьЗначениеПараметра("ДатаЦены",       Параметры.ДатаЦены); 
	СписокВыбораПоставщика.Параметры.УстановитьЗначениеПараметра("Номенклатура",   Параметры.Номенклатура); 
	СписокВыбораПоставщика.Параметры.УстановитьЗначениеПараметра("Характеристика", Параметры.Характеристика); 
	СписокВыбораПоставщика.Параметры.УстановитьЗначениеПараметра("Склад",          Параметры.Склад); 
	КоэффициентПересчета = Обработки.ОбеспечениеПотребностей.ПолучитьКурсВалютыУправленческогоУчета(Параметры.ДатаЦены);
	СписокВыбораПоставщика.Параметры.УстановитьЗначениеПараметра("КоэфПерсчетаВВалютуУпрУчета", КоэффициентПересчета); 
	
	ВалютаУпрУчета = Константы.ВалютаУправленческогоУчета.Получить();
	Элементы.СписокВыбораПоставщикаЦенаВВалютеУправленческогоУчета.Заголовок = 
		СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
			НСтр("ru = ""Цена (%1)"""), Строка(ВалютаУпрУчета));
	
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ЭЛЕМЕНТОВ ШАПКИ ФОРМЫ

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ТАБЛИЦЫ ФОРМЫ СПИСОК ВЫБОРА ПОСТАВЩИКА

&НаКлиенте
Процедура СписокВыбораПоставщикаВыборЗначения(Элемент, Значение, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	СтрокаТаблицыПоставщиков = Элементы.СписокВыбораПоставщика.ТекущиеДанные;
	ВыбранныйПоставщик = Новый Структура();
	ВыбранныйПоставщик.Вставить("ИсточникОбеспечения",                  СтрокаТаблицыПоставщиков.Поставщик);
	ВыбранныйПоставщик.Вставить("Соглашение",                           СтрокаТаблицыПоставщиков.Соглашение);
	ВыбранныйПоставщик.Вставить("УсловиеЦены",                          СтрокаТаблицыПоставщиков.УсловиеЦены);
	ВыбранныйПоставщик.Вставить("ВалютаСоглашения",                     СтрокаТаблицыПоставщиков.Валюта);
	ВыбранныйПоставщик.Вставить("ЦенаВВалютеУправленческогоУчета",
		СтрокаТаблицыПоставщиков.ЦенаВВалютеУправленческогоУчета);
	ВыбранныйПоставщик.Вставить("ЦенаВВалютеСоглашения",                СтрокаТаблицыПоставщиков.ЦенаВВалютеСоглашения);
	ВыбранноеЗначение = Новый Структура("ПараметрыПоставкиОптимальные", ВыбранныйПоставщик);
	ОповеститьОВыборе(ВыбранноеЗначение);
	
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ КОМАНД ФОРМЫ

////////////////////////////////////////////////////////////////////////////////
// СЛУЖЕБНЫЕ ПРОЦЕДУРЫ И ФУНКЦИИ


