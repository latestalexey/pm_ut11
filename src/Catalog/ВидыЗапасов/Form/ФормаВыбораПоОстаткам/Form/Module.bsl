
///////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("Отбор") Тогда
		Организация = Параметры.Отбор.Организация;
		Номенклатура = Параметры.Отбор.Номенклатура;
		Характеристика = Параметры.Отбор.Характеристика;
		Если Параметры.Отбор.Свойство("СкладОтгрузки") Тогда
			Склад = Параметры.Отбор.СкладОтгрузки;
		Иначе
			Склад = Параметры.Отбор.Склад;
		КонецЕсли;
		Если Параметры.Отбор.Свойство("ДокументРеализации") Тогда
			ДокументРеализации = Параметры.Отбор.ДокументРеализации;
		КонецЕсли;
	КонецЕсли;
	
	УстановитьПараметрыДинамическогоСписка();
	
	Элементы.Остаток.Видимость = Не ЗначениеЗаполнено(ДокументРеализации);
	Элементы.Продано.Видимость = ЗначениеЗаполнено(ДокументРеализации);
	
КонецПроцедуры

///////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ЭЛЕМЕНТОВ ШАПКИ ФОРМЫ

&НаКлиенте
Процедура СписокВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	
	СтрокаТаблицы = Элемент.ТекущиеДанные;
	Если СтрокаТаблицы <> Неопределено Тогда
		ОповеститьОВыборе(СтрокаТаблицы.Ссылка);
	КонецЕсли;
	
КонецПроцедуры

///////////////////////////////////////////////////////////////////////////////
// СЛУЖЕБНЫЕ ПРОЦЕДУРЫ И ФУНКЦИИ

///////////////////////////////////////////////////////////////////////////////
// Прочее

&НаСервере
Процедура УстановитьПараметрыДинамическогоСписка()
	
	Список.Параметры.УстановитьЗначениеПараметра("Организация", Организация);
	Список.Параметры.УстановитьЗначениеПараметра("Склад", Склад);
	Список.Параметры.УстановитьЗначениеПараметра("Номенклатура", Номенклатура);
	Список.Параметры.УстановитьЗначениеПараметра("Характеристика", Характеристика);
	Список.Параметры.УстановитьЗначениеПараметра("ДокументРеализации", ДокументРеализации);
	Если ЗначениеЗаполнено(ДокументРеализации) Тогда
		МоментВремени = ДокументРеализации.МоментВремени();
	Иначе
		МоментВремени = Дата(1, 1, 1);
	КонецЕсли;
	Список.Параметры.УстановитьЗначениеПараметра("МоментВремени", МоментВремени);
	
	Элементы.Список.Обновить();
	
КонецПроцедуры
