
////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	УсловияПредоставления = Параметры.УсловияПредоставления.Скопировать();
	Заголовок = Заголовок + ": " + Строка(Параметры.Документ);
	
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ЭЛЕМЕНТОВ ШАПКИ ФОРМЫ

&НаКлиенте
Процедура СписокВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	
	Если Элемент.ТекущиеДанные = Неопределено Тогда
		Возврат;
	КонецЕсли;
	
	Если Элемент.ТекущиеДанные.ЭтоГруппа Тогда
		Возврат;
	КонецЕсли;
	
	РезультатПоиска = УсловияПредоставления.НайтиПоЗначению(Элемент.ТекущиеДанные.Ссылка);
	
	Если РезультатПоиска = Неопределено Тогда
		УсловияПредоставления.Добавить(Элемент.ТекущиеДанные.Ссылка);
	КонецЕсли;

КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ КОМАНД ФОРМЫ

&НаКлиенте
Процедура ПеренестиВДокумент(Команда)
	
	Если УсловияПредоставления.Количество() = 0 Тогда
		Ответ = Вопрос(НСтр("ru = 'Не подобрано ни одного условия. Закрыть?'"), РежимДиалогаВопрос.ДаНет);
		Если Ответ = КодВозвратаДиалога.Нет Тогда
			Возврат;
		КонецЕсли;
	КонецЕсли;
	
	Закрыть(УсловияПредоставления);
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаСоздатьЗаНакопленныйОбъемПродаж(Команда)
	
	СтруктураПараметры = Новый Структура;
	СтруктураПараметры.Вставить("Основание", Новый Структура("УсловиеПредоставления", ПредопределенноеЗначение("Перечисление.УсловияПредоставленияСкидокНаценок.ЗаНакопленныйОбъемПродаж")));
	СтруктураПараметры.Вставить("ДанныеДляЗаполненияРодителя", Элементы.Список.ТекущаяСтрока);
	ОткрытьФорму("Справочник.УсловияПредоставленияСкидокНаценок.Форма.ФормаЭлемента", СтруктураПараметры);
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаСоздатьЗаПервуюПродажуПартнеру(Команда)
	
	СтруктураПараметры = Новый Структура;
	СтруктураПараметры.Вставить("Основание", Новый Структура("УсловиеПредоставления", ПредопределенноеЗначение("Перечисление.УсловияПредоставленияСкидокНаценок.ЗаПервуюПродажуПартнеру")));
	СтруктураПараметры.Вставить("ДанныеДляЗаполненияРодителя", Элементы.Список.ТекущаяСтрока);
	ОткрытьФорму("Справочник.УсловияПредоставленияСкидокНаценок.Форма.ФормаЭлемента", СтруктураПараметры);
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаСоздатьЗаПробнуюПродажу(Команда)
	
	СтруктураПараметры = Новый Структура;
	СтруктураПараметры.Вставить("Основание", Новый Структура("УсловиеПредоставления", ПредопределенноеЗначение("Перечисление.УсловияПредоставленияСкидокНаценок.ЗаПробнуюПродажу")));
	СтруктураПараметры.Вставить("ДанныеДляЗаполненияРодителя", Элементы.Список.ТекущаяСтрока);
	ОткрытьФорму("Справочник.УсловияПредоставленияСкидокНаценок.Форма.ФормаЭлемента", СтруктураПараметры);
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаСоздатьЗаГрафикОплаты(Команда)
	
	СтруктураПараметры = Новый Структура;
	СтруктураПараметры.Вставить("Основание", Новый Структура("УсловиеПредоставления", ПредопределенноеЗначение("Перечисление.УсловияПредоставленияСкидокНаценок.ЗаГрафикОплаты")));
	СтруктураПараметры.Вставить("ДанныеДляЗаполненияРодителя", Элементы.Список.ТекущаяСтрока);
	ОткрытьФорму("Справочник.УсловияПредоставленияСкидокНаценок.Форма.ФормаЭлемента", СтруктураПараметры);
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаСоздатьЗаВремяПродажи(Команда)
	
	СтруктураПараметры = Новый Структура;
	СтруктураПараметры.Вставить("Основание", Новый Структура("УсловиеПредоставления", ПредопределенноеЗначение("Перечисление.УсловияПредоставленияСкидокНаценок.ЗаВремяПродажи")));
	СтруктураПараметры.Вставить("ДанныеДляЗаполненияРодителя", Элементы.Список.ТекущаяСтрока);
	ОткрытьФорму("Справочник.УсловияПредоставленияСкидокНаценок.Форма.ФормаЭлемента", СтруктураПараметры);
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаСоздатьЗаФормуОплаты(Команда)
	
	СтруктураПараметры = Новый Структура;
	СтруктураПараметры.Вставить("Основание", Новый Структура("УсловиеПредоставления", ПредопределенноеЗначение("Перечисление.УсловияПредоставленияСкидокНаценок.ЗаФормуОплаты")));
	СтруктураПараметры.Вставить("ДанныеДляЗаполненияРодителя", Элементы.Список.ТекущаяСтрока);
	ОткрытьФорму("Справочник.УсловияПредоставленияСкидокНаценок.Форма.ФормаЭлемента", СтруктураПараметры);
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаСоздатьОграничениеПоГруппеПользователей(Команда)
	
	СтруктураПараметры = Новый Структура;
	СтруктураПараметры.Вставить("Основание", Новый Структура("УсловиеПредоставления", ПредопределенноеЗначение("Перечисление.УсловияПредоставленияСкидокНаценок.ОграничениеПоГруппеПользователей")));
	СтруктураПараметры.Вставить("ДанныеДляЗаполненияРодителя", Элементы.Список.ТекущаяСтрока);
	ОткрытьФорму("Справочник.УсловияПредоставленияСкидокНаценок.Форма.ФормаЭлемента", СтруктураПараметры);
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаСоздатьКартаЛояльностиНеЗарегистрирована(Команда)
	
	СтруктураПараметры = Новый Структура;
	СтруктураПараметры.Вставить("Основание", Новый Структура("УсловиеПредоставления", ПредопределенноеЗначение("Перечисление.УсловияПредоставленияСкидокНаценок.КартаЛояльностиНеЗарегистрирована")));
	СтруктураПараметры.Вставить("ДанныеДляЗаполненияРодителя", Элементы.Список.ТекущаяСтрока);
	ОткрытьФорму("Справочник.УсловияПредоставленияСкидокНаценок.Форма.ФормаЭлемента", СтруктураПараметры);
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаСоздатьЗаНаличиеКартыЛояльности(Команда)
	
	СтруктураПараметры = Новый Структура;
	СтруктураПараметры.Вставить("Основание", Новый Структура("УсловиеПредоставления", ПредопределенноеЗначение("Перечисление.УсловияПредоставленияСкидокНаценок.ЗаНаличиеКартыЛояльности")));
	СтруктураПараметры.Вставить("ДанныеДляЗаполненияРодителя", Элементы.Список.ТекущаяСтрока);
	ОткрытьФорму("Справочник.УсловияПредоставленияСкидокНаценок.Форма.ФормаЭлемента", СтруктураПараметры);
	
КонецПроцедуры
