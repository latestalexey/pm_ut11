////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

&НаСервере
Процедура ПриЧтенииНаСервере(ТекущийОбъект)
	
	РассчитатьСостояние();
	
КонецПроцедуры

&НаСервере
Процедура ПослеЗаписиНаСервере(ТекущийОбъект, ПараметрыЗаписи)
	
	Если ТекущийОбъект.Стартован Тогда
		РассчитатьСостояние();
	КонецЕсли;
	
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// СЛУЖЕБНЫЕ ПРОЦЕДУРЫ И ФУНКЦИИ

////////////////////////////////////////////////////////////////////////////////
// Прочее

&НаСервере
Процедура РассчитатьСостояние()
	
	Если Объект.Стартован Тогда
		Если Объект.Завершен Тогда
			Если Объект.ЗаказПодтвержден = Истина Тогда
				Состояние = НСтр("ru = 'Заказ принят поставщиком, передан в работу'");
			Иначе
				Состояние = НСтр("ru = 'Заказ отменен'");
			КонецЕсли;
		Иначе
			Если Объект.ЗаказСоздан=Ложь Тогда
				Состояние = НСтр("ru = 'В процессе оформления заказа'");
			Иначе
				Если Объект.СчетПолучен=Ложь Тогда
					Состояние = НСтр("ru = 'Ожидание счета от поставщика'");
				Иначе
					Состояние = НСтр("ru = 'Ожидание подтверждения заказа поставщиком'");

				КонецЕсли;
			КонецЕсли;
		КонецЕсли;
	Иначе
		Состояние = "";
	КонецЕсли;
	
КонецПроцедуры