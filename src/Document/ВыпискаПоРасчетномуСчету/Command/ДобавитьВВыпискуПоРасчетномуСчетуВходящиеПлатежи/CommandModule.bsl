
///////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ

&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	
	БанковскийСчет = Неопределено;
	
	Если ДокументыПринадлежатОдномуБанковскомуСчету(ПараметрКоманды, БанковскийСчет)
	   И ПараметрКоманды.Количество() > 0 Тогда
	 
	    ПараметрыВыбора = Новый Структура("БанковскийСчет, МассивДокументов", БанковскийСчет, ПараметрКоманды);
		ВыбранныйДокумент = ОткрытьФормуМодально("Документ.ВыпискаПоРасчетномуСчету.ФормаВыбора", ПараметрыВыбора);
		
		Если ВыбранныйДокумент <> Неопределено Тогда
			
			ЗаблокироватьДокументДляРедактированияСервер(ВыбранныйДокумент);
			
			СтруктураОснование = Новый Структура("ЭтоВходящиеПлатежи, МассивДокументов", Истина, ПараметрКоманды);
			ПараметрыФормы = Новый Структура("Ключ, Основание, ЗаполнятьПоОснованию", ВыбранныйДокумент, СтруктураОснование, Истина);
			ОткрытьФорму("Документ.ВыпискаПоРасчетномуСчету.ФормаОбъекта",
				ПараметрыФормы,
				ПараметрыВыполненияКоманды.Источник,
				ПараметрыВыполненияКоманды.Уникальность,
				ПараметрыВыполненияКоманды.Окно
			);
			
		КонецЕсли;
		
	КонецЕсли;
	
КонецПроцедуры

///////////////////////////////////////////////////////////////////////////////
// СЛУЖЕБНЫЕ ПРОЦЕДУРЫ И ФУНКЦИИ

///////////////////////////////////////////////////////////////////////////////
// Прочее

&НаСервере
Функция ДокументыПринадлежатОдномуБанковскомуСчету(ПараметрКоманды, БанковскийСчет)
	
	Возврат ДенежныеСредстваСервер.ДокументыПринадлежатОдномуБанковскомуСчету(ПараметрКоманды, Истина, БанковскийСчет);
	
КонецФункции

&НаСервере
Процедура ЗаблокироватьДокументДляРедактированияСервер(ВыбранныйДокумент)
	
	ОбщегоНазначенияУТ.ЗаблокироватьДокументДляРедактирования(ВыбранныйДокумент);
	
КонецПроцедуры
