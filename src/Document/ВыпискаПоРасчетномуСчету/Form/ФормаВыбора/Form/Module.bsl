
///////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если ЗначениеЗаполнено(Параметры.БанковскийСчет) Тогда
		ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбора(Список.Отбор, "БанковскийСчет", Параметры.БанковскийСчет, ВидСравненияКомпоновкиДанных.Равно,, ЗначениеЗаполнено(Параметры.БанковскийСчет));
	КонецЕсли;
	Если Параметры.Свойство("МассивДокументов") Тогда
		МинимальнаяДата = МинимальнаяДатаДокумента(Параметры.МассивДокументов);
		ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбора(Список.Отбор, "Дата", МинимальнаяДата, ВидСравненияКомпоновкиДанных.БольшеИлиРавно,, ЗначениеЗаполнено(МинимальнаяДата));
	КонецЕсли;
	
КонецПроцедуры

///////////////////////////////////////////////////////////////////////////////
// СЛУЖЕБНЫЕ ПРОЦЕДУРЫ И ФУНКЦИИ

///////////////////////////////////////////////////////////////////////////////
// Прочее

Функция МинимальнаяДатаДокумента(МассивДокументов)
	
	Запрос = Новый Запрос("
	|ВЫБРАТЬ
	|	МИНИМУМ(ДанныеДокумента.Дата) КАК Дата
	|ИЗ (
	|	ВЫБРАТЬ
	|		ДанныеДокумента.ДатаВходящегоДокумента КАК Дата
	|	ИЗ
	|		Документ.ПоступлениеБезналичныхДенежныхСредств КАК ДанныеДокумента
	|	ГДЕ
	|		ДанныеДокумента.Ссылка В (&МассивДокументов)
	|
	|	ОБЪЕДИНИТЬ ВСЕ
	|  	
	|	ВЫБРАТЬ
	|		ДанныеДокумента.Дата КАК Дата
	|	ИЗ
	|		Документ.СписаниеБезналичныхДенежныхСредств КАК ДанныеДокумента
	|	ГДЕ
	|		ДанныеДокумента.Ссылка В (&МассивДокументов)
	|
	|	ОБЪЕДИНИТЬ ВСЕ
	|  	
	|	ВЫБРАТЬ
	|		ДанныеДокумента.Дата КАК Дата
	|	ИЗ
	|		Документ.ПриходныйКассовыйОрдер КАК ДанныеДокумента
	|	ГДЕ
	|		ДанныеДокумента.Ссылка В (&МассивДокументов)
	|
	|	ОБЪЕДИНИТЬ ВСЕ
	|  	
	|	ВЫБРАТЬ
	|		ДанныеДокумента.Дата КАК Дата
	|	ИЗ
	|		Документ.РасходныйКассовыйОрдер КАК ДанныеДокумента
	|	ГДЕ
	|		ДанныеДокумента.Ссылка В (&МассивДокументов)
	|
	|	ОБЪЕДИНИТЬ ВСЕ
	|  	
	|	ВЫБРАТЬ
	|		ДанныеДокумента.Дата КАК Дата
	|	ИЗ
	|		Документ.ОтчетБанкаПоОперациямЭквайринга КАК ДанныеДокумента
	|	ГДЕ
	|		ДанныеДокумента.Ссылка В (&МассивДокументов)
	|
	|	) КАК ДанныеДокумента
	|");
	Запрос.УстановитьПараметр("МассивДокументов", МассивДокументов);
	Выборка = Запрос.Выполнить().Выбрать();
	Если Выборка.Следующий() Тогда
		Дата = НачалоДня(Выборка.Дата);
	Иначе
		Дата = Неопределено;
	КонецЕсли;
	
	Возврат Дата;
	
КонецФункции
